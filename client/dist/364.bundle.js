/*! For license information please see 364.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkfec_capstone=self.webpackChunkfec_capstone||[]).push([[364],{5043:(e,n,r)=>{r.r(n),r.d(n,{default:()=>ae});var t=r(7294),a=r(5893);const i=function(e){var n=e.rating,r=(Math.round(4*n)/4).toFixed(2),t=Math.round(r/5*100);return(0,a.jsxs)("div",{className:"starContainer",children:[Array.from(Array(5).keys()).map((function(e,n){return(0,a.jsx)("svg",{className:"star",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})),(0,a.jsx)("div",{className:"starsOverlay",style:{width:"".concat(100-t,"%")}})]})},s=function(e){var n=e.reviews,r=e.rating,t=e.dispatch;return(0,a.jsx)("span",{className:"starFilter",onClick:function(e){e.preventDefault(),t({type:"toggle",payload:r})},children:n.ratings[r]||0})};var o=r(6914);const l=function(e){var n=e.reviews,r=e.ratingCount,t=e.dispatch,i=function(e){return Number(n.ratings[e])||0};return(0,a.jsxs)("div",{children:[["5","4","3","2","1"].map((function(e){return(0,a.jsxs)("div",{className:"ratingsBreakdown",children:[(0,a.jsx)("span",{children:"".concat(e," stars")}),(0,a.jsx)("progress",{className:"ratingprog",max:r,value:i(e)}),(0,a.jsx)(s,{rating:e,dispatch:t,reviews:n})]},e)})),(0,a.jsx)(o.Z,{variant:"contained",onClick:function(e){e.preventDefault(),t({type:"reset"})},children:"Reset Filter"})]})},c=function(e){var n=e.characteristics,r=function(e){return Math.round((Number(n[e].value)-1)/4*100)};return console.log(r("Fit")),(0,a.jsxs)("div",{className:"chara-section",children:[(0,a.jsx)("div",{children:"Fit"}),(0,a.jsxs)("div",{className:"chara-box",children:[(0,a.jsxs)("div",{className:"progressbar",children:[(0,a.jsx)("progress",{className:"characteristics big",value:"0"}),(0,a.jsx)("span",{children:"Too Small"})]}),(0,a.jsxs)("div",{className:"progressbar",children:[(0,a.jsx)("progress",{className:"characteristics big",value:"0"}),(0,a.jsx)("span",{children:"Perfect"})]}),(0,a.jsxs)("div",{className:"progressbar",children:[(0,a.jsx)("progress",{className:"characteristics big",value:"0"}),(0,a.jsx)("span",{children:"Too large"})]}),(0,a.jsx)("span",{className:"triangelicon",style:{left:"".concat(r("Fit"),"%")},children:"▼"})]}),(0,a.jsx)("div",{children:"Length"}),(0,a.jsxs)("div",{className:"chara-box",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics big",value:"0"}),(0,a.jsx)("span",{children:"Too Small"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics big",value:"0"}),(0,a.jsx)("span",{children:"Perfect"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics big",value:"0"}),(0,a.jsx)("span",{children:"Too large"})]}),(0,a.jsx)("span",{className:"triangelicon",style:{left:"".concat(r("Length"),"%")},children:"▼"})]}),(0,a.jsx)("div",{children:"Comfort"}),(0,a.jsxs)("div",{className:"chara-box",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{children:"Poor"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{style:{"margin-bottom":"20px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{style:{"margin-bottom":"20px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{children:"Perfect"})]}),(0,a.jsx)("span",{className:"triangelicon",style:{left:"".concat(r("Comfort"),"%")},children:"▼"})]}),(0,a.jsx)("div",{children:"Quality"}),(0,a.jsxs)("div",{className:"chara-box",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{children:"Poor"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{style:{"margin-bottom":"20px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{style:{"margin-bottom":"20px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("progress",{className:"characteristics small",value:"0"}),(0,a.jsx)("span",{children:"Perfect"})]}),(0,a.jsx)("span",{className:"triangelicon",style:{left:"".concat(r("Quality"),"%")},children:"▼"})]})]})},u=function(e){var n=e.reviewsMeta,r=e.dispatch,t=0,s=function(){console.log("reviewsMeta.ratings in Ratings.jsx",n.ratings);var e=0;return Object.keys(n.ratings).forEach((function(r){e+=Number(r)*Number(n.ratings[r]),t+=Number(n.ratings[r])})),(Math.round(e/t*10)/10).toFixed(1)}(),o=(Number(n.recommended.true)/t*100).toFixed(0)+"%";return(0,a.jsxs)("div",{className:"rating-box",children:[(0,a.jsx)("p",{id:"ratingtitle",children:"RATINGS & REVIEWS"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{id:"avgrating",children:s}),(0,a.jsxs)("span",{id:"avgstars",children:[(0,a.jsx)(i,{rating:s}),(0,a.jsx)("br",{})]}),(0,a.jsx)("div",{id:"recommendrate",children:"".concat(o," of the reviews recommend this product")}),(0,a.jsx)(l,{reviews:n,ratingCount:t,dispatch:r}),(0,a.jsx)(c,{characteristics:n.characteristics})]})]})};var d=r(9669),h=r.n(d);function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return m(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}const g=function(e){var n=e.review,r=e.handleReport,s=p((0,t.useState)(n.helpfulness),2),o=s[0],l=s[1],c=p((0,t.useState)(0),2),u=c[0],d=c[1],m=["January","February","March","April","May","June","July","August","September","October","November","December"][Number(n.date.slice(5,7))-1],g=n.date.slice(8,10),f=n.date.slice(0,4);return(0,t.useEffect)((function(){u<=1&&h()({url:"/api/reviews/helpful",method:"post",data:{review_id:n.review_id}}).then((function(e){l(o+1)}))}),[u]),(0,a.jsxs)("div",{className:"reviewTile",children:[(0,a.jsx)(i,{rating:n.rating,reviewId:n.review_id}),(0,a.jsx)("span",{className:"nameanddate",children:"".concat(n.reviewer_name,",  ").concat(m," ").concat(g,", ").concat(f)}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"summary",children:n.summary.slice(0,60)}),(0,a.jsx)("br",{}),n.recommend?(0,a.jsxs)("span",{children:["✓ I recommend this product",(0,a.jsx)("br",{})]}):(0,a.jsx)(a.Fragment,{}),n.response&&n.response.length?(0,a.jsxs)("span",{children:["Response from seller: ".concat((0,a.jsx)("br",{})).concat(n.response),(0,a.jsx)("br",{})]}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("span",{className:"body",children:n.body}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:"Helpful?"}),(0,a.jsx)("span",{className:"helpful",onClick:function(e){console.log("clicked helpful",n.review_id),e.preventDefault(),d(u+1)},children:" Yes "}),(0,a.jsxs)("span",{children:["(",o,")"]}),(0,a.jsx)("span",{className:"report",onClick:function(e){e.preventDefault(),r(n.review_id)},children:"Report"})]})};var f=r(3379),x=r.n(f),v=r(7795),j=r.n(v),b=r(569),y=r.n(b),w=r(3565),N=r.n(w),S=r(9216),O=r.n(S),k=r(4589),A=r.n(k),R=r(4424),C={};C.styleTagTransform=A(),C.setAttributes=N(),C.insert=y().bind(null,"head"),C.domAPI=j(),C.insertStyleElement=O(),x()(R.Z,C),R.Z&&R.Z.locals&&R.Z.locals;var P=r(3981);function F(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?E(Object(r),!0).forEach((function(n){M(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function M(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function D(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,n)||T(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,n){if(e){if("string"==typeof e)return L(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,n):void 0}}function L(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function Z(e){var n=e.index,r=e.rating,i=e.hoverRating,s=e.onMouseEnter,o=e.onMouseLeave,l=e.onSaveRating,c=(0,t.useMemo)((function(){return i>=n||!i&&r>=n?"yellow":"none"}),[r,i,n]);return(0,a.jsx)("div",{className:"cursor-pointer",onMouseEnter:function(){return s(n)},onMouseLeave:function(){return o()},onClick:function(){return l(n)},children:(0,a.jsx)(z,{fill:c})})}function z(e){var n=e.fill,r=void 0===n?"none":n;return(0,a.jsx)("svg",{className:"w-6 h-6",fill:r,stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}function _(e){var n=e.meanings,r=e.handleChara;return e.name,(0,a.jsx)("div",{className:"section-box",children:n.map((function(e,n,t){return(0,a.jsxs)("div",{className:"characteristic-box",children:[(0,a.jsx)("span",{children:(0,a.jsx)("input",{className:"rateChara",type:"radio",value:n+1,name:t,onChange:r,required:!0})}),(0,a.jsx)("span",{className:"explainChara",children:e})]})}))})}const B=function(e){var n=D((0,t.useState)({recommend:!0}),2),r=n[0],i=n[1],s=D((0,t.useState)(0),2),l=s[0],c=s[1],u=D((0,t.useState)(0),2),d=u[0],h=u[1],p=D((0,t.useState)(!1),2),m=p[0],g=p[1],f=D((0,t.useState)("Yes"),2),x=f[0],v=f[1],j=D((0,t.useState)({}),2),b=j[0],y=j[1],w=D((0,t.useState)(""),2),N=w[0],S=w[1],O=D((0,t.useState)(""),2),k=O[0],A=O[1],R=D((0,t.useState)(!1),2),C=R[0],E=R[1],M=D((0,t.useState)([]),2),T=M[0],L=M[1],z=D((0,t.useState)([]),2),B=z[0],W=z[1],U=D((0,t.useState)(""),2),Y=U[0],V=U[1],q=D((0,t.useState)(""),2),Q=q[0],G=q[1],$=function(e){h(e)},J=function(){h(0)},H=function(e){c(e),i(I(I({},r),{},{rating:e})),g(!0)},K=function(e){console.log(e.target.value),v(e.target.value),"Yes"===e.target.value?i(I(I({},r),{},{recommend:!0})):i(I(I({},r),{},{recommend:!1})),console.log(r)};return(0,t.useEffect)((function(){if(!(T.length<1)){var e=[];T.forEach((function(n){return e.push(URL.createObjectURL(n))})),W([].concat(F(B),[e]))}}),[T]),e.trigger?(0,a.jsx)("div",{className:"popupform",children:(0,a.jsxs)("div",{className:"popupform-inner",children:[e.children,(0,a.jsxs)("form",{onSubmit:function(n){n.preventDefault(),console.log(b),console.log(B),e.postReview(I(I({},r),{},{photos:B,characteristics:b})),e.SetTrigger(!1)},children:[(0,a.jsxs)("label",{children:["Overall rating (mandatory):",(0,a.jsxs)("div",{className:"box flex",children:[[1,2,3,4,5].map((function(e){return(0,a.jsx)(Z,{index:e,rating:l,hoverRating:d,onMouseEnter:$,onMouseLeave:J,onSaveRating:H},e)})),m?(0,a.jsx)("span",{children:["Poor","Fair","Average","Good","Great"][l-1]}):(0,a.jsx)(a.Fragment,{})]})]}),(0,a.jsxs)("label",{children:["Do you recommend this product? (mandatory)",(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{className:"recommendRadio",type:"radio",value:"Yes",name:"recommend",onChange:K,checked:"Yes"===x})," Yes",(0,a.jsx)("input",{className:"recommendRadio",type:"radio",value:"No",name:"recommend",onChange:K,checked:"No"===x})," No"]})]}),(0,a.jsxs)("label",{children:["Size",(0,a.jsx)(_,{handleChara:function(e){},name:"Size",meanings:["A size too small","½ a size too small","Perfect","½ a size too big","A size too wide"]})]}),(0,a.jsxs)("label",{children:["Width",(0,a.jsx)(_,{handleChara:function(e){},name:"Width",meanings:["Too narrow","Slightly narrow","Ok","Slightly wide","Too wide"]})]}),(0,a.jsxs)("label",{children:["Comfort",(0,a.jsx)(_,{handleChara:function(e){y(I(I({},b),{},{240584:Number(e.target.value)}))},name:"Comfort",meanings:["Uncomfortable","Slightly uncomfortable","Ok","Comfortable","Perfect"]})]}),(0,a.jsxs)("label",{children:["Quality",(0,a.jsx)(_,{handleChara:function(e){y(I(I({},b),{},{240585:Number(e.target.value)}))},name:"Quality",meanings:["Poor","Below average","What I expected","Pretty great","Perfect"]})]}),(0,a.jsxs)("label",{children:["Length",(0,a.jsx)(_,{handleChara:function(e){y(I(I({},b),{},{240583:Number(e.target.value)}))},name:"Length",meanings:["Runs slightly short","Runs slightly tight","Perfect","Runs slightly long","Runs long"]})]}),(0,a.jsxs)("label",{children:["Fit",(0,a.jsx)(_,{handleChara:function(e){y(I(I({},b),{},{240582:Number(e.target.value)}))},name:"Fit",meanings:["Runs tight","Runs slightly tight","Perfect","Runs slightly long","Runs long"]})]}),(0,a.jsxs)("div",{className:"summarybody-box",children:[(0,a.jsxs)("label",{children:["Review summary",(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{placeholder:"Example: Best purchase ever!",maxLength:"60",value:N,onChange:function(e){S(e.target.value),i(I(I({},r),{},{summary:e.target.value}))}})})]}),(0,a.jsxs)("label",{children:["Review Body",(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{placeholder:"Why did you like the product or not?",minLength:"50",maxLength:"1000",className:"reviewBody",value:k,onChange:function(e){A(e.target.value),i(I(I({},r),{},{body:e.target.value}))},required:!0})}),k.length<50?(0,a.jsxs)("p",{children:["Minimum required characters left: ",50-k.length]}):(0,a.jsx)("p",{children:"Minimum reached"})]})]}),(0,a.jsx)(o.Z,{onClick:function(){return E(!0)},variant:"contained",component:"span",children:"Upload Photos"}),C?(0,a.jsxs)("div",{children:[B.length<5?(0,a.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){L(F(e.target.files))}}):(0,a.jsx)(a.Fragment,{}),B.map((function(e){return(0,a.jsx)("img",{className:"smallimg",src:e})}))]}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{className:"nickName",children:(0,a.jsxs)("label",{children:["Nickname:",(0,a.jsx)(P.Z,{placeholder:"Example: jackson11!",maxLength:"60",className:"nickName",value:Y,onChange:function(e){V(e.target.value),i(I(I({},r),{},{name:e.target.value}))},required:!0}),(0,a.jsx)("p",{children:"For privacy reasons, do not use your full name or email address"})]})}),(0,a.jsx)("div",{className:"email",children:(0,a.jsxs)("label",{children:["Email:",(0,a.jsx)(P.Z,{placeholder:"Example: jackson11@email.com",maxLength:"60",className:"email",value:Q,onChange:function(e){G(e.target.value),i(I(I({},r),{},{email:e.target.value}))},required:!0}),(0,a.jsx)("p",{children:"For authentication reasons, you will not be emailed” will appear"})]})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{className:"submitbutton",variant:"contained",component:"span",type:"submit",value:"Submit"})})]})]})}):""};function W(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,n)||Y(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,n){if(e){if("string"==typeof e)return V(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,n):void 0}}function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}const q=function(e){var n=e.reviews,r=e.starFilters,i=e.productName,s=e.postReview,l=e.handleReport;console.log("In ReviewsList got: ",n),console.log("starFilters in ReviewsList.jsx: ",r);var c=U((0,t.useState)(2),2),u=c[0],d=c[1],h=U((0,t.useState)([]),2),p=h[0],m=h[1],f=U((0,t.useState)(!1),2),x=f[0],v=f[1],j=U((0,t.useState)(""),2),b=j[0],y=j[1],w=U((0,t.useState)(""),2),N=w[0],S=w[1];return console.log("reviews To Render: ",p),(0,t.useEffect)((function(){if(m(n),function(){if(r.length){console.log("starFilters: ",r);var e=n.filter((function(e){return r.includes(e.rating.toString())}));m(W(e)),console.log("ReviewsList after applying starFilters: ",p)}}(),N.length>=3){var e=p.filter((function(e){return e.body.includes(N)}));m(e)}}),[n,r,N]),(0,a.jsxs)("div",{className:"review-box",children:[(0,a.jsxs)("div",{className:"review-box-inner",children:[(0,a.jsx)("h1",{children:"Reviews"}),(0,a.jsxs)("div",{className:"reviewlistheader",children:[(0,a.jsxs)("h3",{children:[p.length||0," reviews, sorted by"]}),(0,a.jsxs)("select",{defaultValue:"relevant",onChange:function(e){console.log(e.target.value," selected");var r=e.target.value;"relevant"===r&&(n.sort((function(e,n){var r=e.helpfulness||0,t=n.helpfulness||0,a=new Date(e.date),i=new Date(n.date);return r<t?1:r>t||a>i?-1:a<i?1:0})),m(W(n))),"newest"===r&&(n.sort((function(e,n){return new Date(n.date)-new Date(e.date)})),m(W(n))),"helpfulness"===r&&(n.sort((function(e,n){return n.helpfulness-e.helpfulness})),m(W(n))),console.log("reviews after sorted by change: ",n)},children:[(0,a.jsx)("option",{value:"helpfulness",children:"helpfulness "}),(0,a.jsx)("option",{value:"newest",children:"newest"}),(0,a.jsx)("option",{value:"relevant",children:"relevant "})]}),(0,a.jsxs)(o.Z,{className:"searchreview",children:[(0,a.jsx)("span",{children:(0,a.jsx)("svg",{width:"20",height:"20",class:"DocSearch-Search-Icon",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"})})}),(0,a.jsx)("input",{placeholder:"Search",onChange:function(e){e.preventDefault(),S(e.target.value)}})]})]}),p.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"reviewtiles",children:p.slice(0,u).map((function(e,n){return(0,a.jsx)(g,{review:e,handleReport:l},n)}))}),p.length>2&&p.length>u?(0,a.jsx)(o.Z,{style:{padding:"1px",margin:"2px"},variant:"contained",onClick:function(){u<n.length?d(u+2):d(n.length)},children:"MORE REVIEWS"}):(0,a.jsx)(a.Fragment,{})]}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)(o.Z,{style:{padding:"1px",margin:"2px"},variant:"contained",onClick:function(){return v(!0)},children:"ADD A REVIEW +"})]}),(0,a.jsxs)(B,{trigger:x,SetTrigger:v,value:b,SetValue:y,postReview:s,children:[(0,a.jsx)("h3",{children:"Write Your Review"}),(0,a.jsxs)("h4",{children:["About the ",i]})]})]})};var Q=r(8358);const G={product_id:"71697",ratings:{2:"1",3:"1",4:"1",5:"1"},recommended:{false:"2",true:"2"},characteristics:{Fit:{id:240582,value:"4.2000000000000000"},Length:{id:240583,value:"3.8000000000000000"},Comfort:{id:240584,value:"4.4000000000000000"},Quality:{id:240585,value:"4.0000000000000000"}}};var $=r(7007),J={};function H(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function K(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?H(Object(r),!0).forEach((function(n){X(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function X(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,n)||ne(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,n){if(e){if("string"==typeof e)return re(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,n):void 0}}function re(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}J.styleTagTransform=A(),J.setAttributes=N(),J.insert=y().bind(null,"head"),J.domAPI=j(),J.insertStyleElement=O(),x()($.Z,J),$.Z&&$.Z.locals&&$.Z.locals;var te=function(e,n){switch(n.type){case"toggle":return e.includes(n.payload)?e.filter((function(e){return e!==n.payload})):[].concat(function(e){if(Array.isArray(e))return re(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||ne(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n.payload]);case"reset":return[];default:return e}var r};const ae=function(e){var n=e.currentProductId,r=ee((0,t.useState)(Q.Z.results),2),i=r[0],s=r[1],o=ee((0,t.useState)(G),2),l=o[0],c=o[1],d=ee((0,t.useReducer)(te,[]),2),p=d[0],m=d[1],g=ee((0,t.useState)(""),2),f=g[0],x=g[1],v=ee((0,t.useState)(!1),2),j=v[0],b=v[1],y=function(){n&&h().all([h()({method:"get",url:"/reviews/",headers:{product_id:n}}),h()({method:"get",url:"/reviews/meta",headers:{product_id:n}}),h().get("/products/".concat(n))]).then(h().spread((function(e,n,r){console.log("reviews from server Ratings&Reviews.jsx",e,"reviewsMeta",n,"productName: ",r.data.name),s(e.data.results),c(n.data),x(r.data.name)})))};return(0,t.useEffect)(y,[n,j]),console.log("current product ID in RatingsAndReviews.jsx: ",n),console.log("starFilters",p),(0,a.jsxs)("div",{children:[(0,a.jsx)("link",{rel:"stylesheet",type:"css",href:"reviewsStyle.css"}),(0,a.jsx)(u,{reviewsMeta:l,dispatch:m}),(0,a.jsx)(q,{reviews:i,starFilters:p,productName:f,postReview:function(e){console.log("sending to serer newReview",e),h().post("/reviews/",K(K({},e),{},{product_id:n})).then((function(e){console.log("after posting review response:",e),y()})).catch((function(e){console.log(e)}))},handleReport:function(e){b(!j),h()({method:"post",url:"/reviews/report",data:{review_id:e}})}})]})}},4424:(e,n,r)=>{r.d(n,{Z:()=>o});var t=r(8081),a=r.n(t),i=r(3645),s=r.n(i)()(a());s.push([e.id,".popupform {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.2);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow-x: scroll;\n}\n.smallimg {\n  width:50px;height:40px;margin-right:5px;padding:5px\n}\n.popupform-inner {\n  position: relative;\n  padding: 32px;\n  width: 100%;\n  max-width: 640px;\n  background-color: #FFF;\n}\n\n.box {\n  width: 300px;\n}\n\n.box.h1 {\n  font-size: 20px;\n  margin: 0 0 1rem 0;\n}\n\n.w-6 {\n  width: 1.5em;\n}\n\n.h-6 {\n  height: 1.5em;\n}\n\n.flex {\n  display: flex;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n\n.section-box {\n  font-size: smaller;\n  display: flex;\n  margin-bottom: 5px;;\n}\n.recommendRadio{\n  width: 10%;\n}\n.characteristic-box {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0px;\n  width: 18%;\n}\ntextarea{\n  width: 90%;\n  max-width: 100%;\n  padding: 5px;\n}\ndiv.summarybody-box{\n  margin-top: 15px\n}\ntextarea.reviewBody{\n  height: 120px;\n}\np{\n  font-size: smaller;\n  margin-top: 1px;\n}\n.nickName{\n  margin-top: 3px;\n}\ninput{\n  width: 200px\n}",""]);const o=s},7007:(e,n,r)=>{r.d(n,{Z:()=>o});var t=r(8081),a=r.n(t),i=r(3645),s=r.n(i)()(a());s.push([e.id,".rating-box{\n  margin-top: 30px;\n  margin-left: 5%;\n  margin-bottom: 5%;\n  float: left;\n  width: 25%;\n\n}\n.review-box{\n  margin-top: 30px;\n  margin-right: 5%;\n  margin-bottom: 5%;\n  float: right;\n  width: 65%;\n}\n\n\n#starrating-box {\nfloat: right;\nmargin-right: 20%;\n}\n#ratingtitle{\n  margin-left: 8px;\n}\n\n#avgrating {\n  font-size:5ex;\n  /* font-weight: bold; */\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  color:rgb(81, 8, 81);\n  margin-left: 8px;\n}\n#avgstars{\n  position: absolute;\n  margin-left: 8px;\n}\n#recommendrate{\n  margin: 15px;\n  color: rgb(81, 8, 81)\n}\n.ratingsBreakdown{\n  color:rgb(81, 8, 81);\n  margin: 8px;\n}\n.ratingprog{\n  background-color: rgb(121, 225, 121);;\n  margin: 5px;\n  width: 70%;\n  height: 10px;\n}\n.starContainer{\n  display: inline-flex;\n  align-items: center;\n  position: relative;\n\n}\n.star{\n  width: 18px;\n  display: flex;\n  color: rgb(248, 175, 5);;\n  display: flex;\n  margin-right: 2px;\n  fill: rgb(248, 175, 5);\n\n}\n\n.starsOverlay{\n  background-color: white;\n  mix-blend-mode: color;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 1;\n\n}\n.chara-box{\n  margin-bottom: 15px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 1px;\n  width: 240px;\n  position: relative;\n}\n.chara-section{\n  margin: 15px;\n}\n.chara-section span{\n  font-size: smaller;\n  display: flex;\n  margin-bottom: 5px;\n}\nprogress.characteristics.big{\n  width: 80px;\n  background-color: yellow;\n  margin: 1px;\n  height: 10px\n}\n\nprogress.characteristics.small{\n  width: 60px;\n  background-color: yellow;\n  margin: 1px;\n  height: 10px\n}\ndiv.characteristics{\n  font-size: smaller;\n}\n\nspan.starFilter{\n  text-decoration: underline;\n}\n\nspan.starFilter:hover {\n  background-color: lightcoral;\n}\n\ndiv.ratingsBreakdown:hover {\n  background-color: Lightgrey;\n}\n.page-bottom{\n  position:static;\n  height: 30px;\n  margin-top: 20px;\n}\n.reviewtiles{\n  max-height: 55vh;\n  overflow-x: scroll;\n}\n.reviewTile {\n  position: relative;\n  margin-bottom: 10px;\n}\n.nameanddate{\n  float: right;\n  padding: 1px\n}\n.summary{\n  font-size: large;\n  font-weight: bold;\n padding-top: 10px;\n  padding-bottom: 50px;\n}\n.submitbutton{\n  background-color: #1976d2;\n  color: white;\n  text-transform: uppercase;\n  border-radius: 4px;\n  font-weight: 500;\n  line-height: 1.75;\n}\n\n.searchIcon{\n  float: left;\n  color:#1976d2;\n\n}\n\n.searchreview{\nfloat: right;\nwidth: 20%;\nmax-height: 30px;\n}\n.reviewlistheader{\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 20px;\n}\n.reviewlistheader select{\n  width:auto;\n  height:20px\n}\n.helpful, .report{\ntext-decoration:underline ;\n}\n.triangelicon{\n  position: absolute;\n  top: 0px;\n}",""]);const o=s}}]);